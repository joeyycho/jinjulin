import { useEffect, useRef, useState } from "react";
import useGeolocation from "../hooks/useGeolocation.js";

function Map({ setSelectedPlace }) {
  const mapRef = useRef(null);
  const { currentMyLocation } = useGeolocation();
  const [address, setAddress] = useState([]);

  // API에서 주소 목록 가져오기
  useEffect(() => {
    async function fetchData() {
      const result = await fetch(process.env.REACT_APP_ADDRESS_API);
      const data = await result.json();
      setAddress(data);
    }
    fetchData();
  }, []);

  useEffect(() => {
    if (
      window.naver &&
      window.naver.maps &&
      currentMyLocation.lat !== 0 &&
      currentMyLocation.lng !== 0
    ) {
      const { naver } = window;

      const mapOptions = {
        center: new naver.maps.LatLng(
          currentMyLocation.lat,
          currentMyLocation.lng
        ),
        zoom: 14,
        zoomControl: true,
        logoControl: false,
      };

      mapRef.current = new naver.maps.Map("map", mapOptions);

      const colorMap = {
        식당: "#FE8184",
        카페: "#FDC53C",
        술집: "#FF9A4F",
        놀거리: "#5CDD71",
        명소: "#B09EFC",
        가게: "#F498E3",
      };

      address.forEach((addressItem) => {
        const markerColor = colorMap[addressItem.placeType] || "red";
        const marker = new naver.maps.Marker({
          position: new naver.maps.LatLng(addressItem.lat, addressItem.lng),
          map: mapRef.current,
          icon: {
            content: `
              <div style="
                width: 20px;
                height: 20px;
                border: 2px solid white;
                border-radius: 50%;
                background-color: ${markerColor};
                display: flex;
                justify-content: center;
                align-items: center;
                box-shadow: 0 0 2px;
              ">
<svg width="16" height="13" viewBox="0 0 32 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="path-1-inside-1_118_48" fill="white">
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.06 13.9973C19.7707 11.0313 20.5224 7.89444 21.2568 5.93554C22.1044 1.43364 18.1668 0 15.9725 0C13.7781 0 9.89349 1.51403 10.8471 5.26561C12.2164 9.51506 13.0195 13.6111 13.6166 16.6571L13.6167 16.6572C13.7307 17.2391 13.8373 17.7826 13.9389 18.2816C13.6523 17.3124 13.2999 16.1877 12.919 14.9724C11.8677 11.6175 10.6002 7.57277 9.90672 4.20713C10.41 2.07676 7.80098 3.11801 6.08106 3.95619C4.36115 4.79438 2.62253 7.83811 6.08106 11.2547C7.67471 13.488 9.2468 16.2213 10.5112 18.4197L10.5112 18.4197L10.5113 18.4198C10.9337 19.1542 11.3218 19.829 11.6648 20.4054C10.8777 19.1878 9.65232 17.4893 8.34049 15.6709L8.34047 15.6709L8.34046 15.6709C6.86291 13.6228 5.27567 11.4227 4.08137 9.58658C3.61783 7.76438 2.28019 8.44495 1.99795 8.9353C1.12679 9.63414 0.677667 12.1323 2.28018 13.1372C3.49428 14.2555 5.14146 15.9637 6.71624 17.5968L6.71626 17.5969L6.7163 17.5969L6.71634 17.5969L6.71641 17.597C8.35563 19.297 9.91638 20.9155 10.8286 21.7028L10.8208 21.7315C10.0719 21.0039 8.96221 20.0006 7.77169 18.9242L7.77167 18.9242L7.77162 18.9242C6.20839 17.5108 4.50584 15.9715 3.29799 14.7652C2.25171 12.9966 1.45707 13.8273 1.3225 14.3636C0.87018 14.9261 1.80142 16.6142 3.54962 17.3779C5.42686 18.6806 7.12034 20.0793 8.46842 21.1928C8.86778 21.5226 9.23684 21.8274 9.57137 22.0973C8.33933 21.3214 6.85887 20.3184 5.32432 19.0527C3.77477 17.4717 3.25373 18.1014 3.25373 18.6909C2.90513 19.1571 3.45692 20.8079 5.50974 21.2768C6.94167 22.0521 9.16977 23.2025 10.7743 23.8724C10.1419 23.7061 9.5413 23.5367 9.03261 23.367C7.44334 22.5095 7.95985 24.4791 8.15851 24.7604C8.33069 25.5509 9.2975 25.9931 11.0854 25.7385C11.6387 25.7385 12.2422 25.7564 12.832 25.7738C13.447 25.7919 14.0471 25.8097 14.5601 25.8063C14.862 26.0197 15.1693 26.2147 15.7137 26.2539C15.7251 26.2551 15.7361 26.2558 15.7467 26.2561C15.8018 26.2594 15.8593 26.2611 15.9195 26.2611C16.6299 26.2611 17.1229 26.1094 17.4654 25.806C17.9924 25.8115 18.6174 25.793 19.2586 25.7741C19.8484 25.7566 20.4519 25.7388 21.0052 25.7388C22.7931 25.9934 23.7599 25.5512 23.9321 24.7607C24.1308 24.4794 24.6473 22.5098 23.058 23.3673C22.4151 23.556 21.6287 23.7571 20.8175 23.9602C22.4336 23.317 24.8611 22.0661 26.3859 21.2406C28.4387 20.7716 28.9905 19.1209 28.6419 18.6547C28.6419 18.0651 28.1209 17.4354 26.5713 19.0164C24.8803 20.4112 23.255 21.4869 21.9554 22.2913C22.8214 21.6922 23.9587 20.7883 25.1163 19.8682L25.1164 19.8681C26.3193 18.912 27.5443 17.9384 28.5099 17.271C30.2581 16.5073 31.1893 14.8193 30.737 14.2567C30.6024 13.7204 29.8078 12.8897 28.7615 14.6583C27.5537 15.8646 25.8511 17.4039 24.2879 18.8173L24.2879 18.8173C23.6887 19.3591 23.1099 19.8823 22.5874 20.3612C23.3816 19.5699 24.3193 18.5975 25.2842 17.5968L25.2843 17.5968C26.859 15.9637 28.5062 14.2555 29.7203 13.1372C31.3228 12.1323 30.7106 9.5753 29.8395 8.87646C29.5666 8.40862 28.3826 7.76438 27.9191 9.58658C26.7248 11.4228 25.1375 13.6229 23.66 15.6709C22.5855 17.1603 21.569 18.5694 20.8038 19.6995C21.46 18.6736 22.2003 17.4763 22.9429 16.2753L22.9429 16.2752C24.1037 14.3979 25.2702 12.5114 26.1303 11.2554C29.5888 7.83874 27.8502 4.795 26.1303 3.95681C24.4104 3.11863 21.8014 2.07738 22.3046 4.20775C21.2759 8.74992 19.7364 13.2375 18.592 16.5735C18.3568 17.2592 18.1382 17.8963 17.9442 18.4751C18.2977 17.1788 18.6728 15.6134 19.06 13.9973Z"/>
</mask>
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.06 13.9973C19.7707 11.0313 20.5224 7.89444 21.2568 5.93554C22.1044 1.43364 18.1668 0 15.9725 0C13.7781 0 9.89349 1.51403 10.8471 5.26561C12.2164 9.51506 13.0195 13.6111 13.6166 16.6571L13.6167 16.6572C13.7307 17.2391 13.8373 17.7826 13.9389 18.2816C13.6523 17.3124 13.2999 16.1877 12.919 14.9724C11.8677 11.6175 10.6002 7.57277 9.90672 4.20713C10.41 2.07676 7.80098 3.11801 6.08106 3.95619C4.36115 4.79438 2.62253 7.83811 6.08106 11.2547C7.67471 13.488 9.2468 16.2213 10.5112 18.4197L10.5112 18.4197L10.5113 18.4198C10.9337 19.1542 11.3218 19.829 11.6648 20.4054C10.8777 19.1878 9.65232 17.4893 8.34049 15.6709L8.34047 15.6709L8.34046 15.6709C6.86291 13.6228 5.27567 11.4227 4.08137 9.58658C3.61783 7.76438 2.28019 8.44495 1.99795 8.9353C1.12679 9.63414 0.677667 12.1323 2.28018 13.1372C3.49428 14.2555 5.14146 15.9637 6.71624 17.5968L6.71626 17.5969L6.7163 17.5969L6.71634 17.5969L6.71641 17.597C8.35563 19.297 9.91638 20.9155 10.8286 21.7028L10.8208 21.7315C10.0719 21.0039 8.96221 20.0006 7.77169 18.9242L7.77167 18.9242L7.77162 18.9242C6.20839 17.5108 4.50584 15.9715 3.29799 14.7652C2.25171 12.9966 1.45707 13.8273 1.3225 14.3636C0.87018 14.9261 1.80142 16.6142 3.54962 17.3779C5.42686 18.6806 7.12034 20.0793 8.46842 21.1928C8.86778 21.5226 9.23684 21.8274 9.57137 22.0973C8.33933 21.3214 6.85887 20.3184 5.32432 19.0527C3.77477 17.4717 3.25373 18.1014 3.25373 18.6909C2.90513 19.1571 3.45692 20.8079 5.50974 21.2768C6.94167 22.0521 9.16977 23.2025 10.7743 23.8724C10.1419 23.7061 9.5413 23.5367 9.03261 23.367C7.44334 22.5095 7.95985 24.4791 8.15851 24.7604C8.33069 25.5509 9.2975 25.9931 11.0854 25.7385C11.6387 25.7385 12.2422 25.7564 12.832 25.7738C13.447 25.7919 14.0471 25.8097 14.5601 25.8063C14.862 26.0197 15.1693 26.2147 15.7137 26.2539C15.7251 26.2551 15.7361 26.2558 15.7467 26.2561C15.8018 26.2594 15.8593 26.2611 15.9195 26.2611C16.6299 26.2611 17.1229 26.1094 17.4654 25.806C17.9924 25.8115 18.6174 25.793 19.2586 25.7741C19.8484 25.7566 20.4519 25.7388 21.0052 25.7388C22.7931 25.9934 23.7599 25.5512 23.9321 24.7607C24.1308 24.4794 24.6473 22.5098 23.058 23.3673C22.4151 23.556 21.6287 23.7571 20.8175 23.9602C22.4336 23.317 24.8611 22.0661 26.3859 21.2406C28.4387 20.7716 28.9905 19.1209 28.6419 18.6547C28.6419 18.0651 28.1209 17.4354 26.5713 19.0164C24.8803 20.4112 23.255 21.4869 21.9554 22.2913C22.8214 21.6922 23.9587 20.7883 25.1163 19.8682L25.1164 19.8681C26.3193 18.912 27.5443 17.9384 28.5099 17.271C30.2581 16.5073 31.1893 14.8193 30.737 14.2567C30.6024 13.7204 29.8078 12.8897 28.7615 14.6583C27.5537 15.8646 25.8511 17.4039 24.2879 18.8173L24.2879 18.8173C23.6887 19.3591 23.1099 19.8823 22.5874 20.3612C23.3816 19.5699 24.3193 18.5975 25.2842 17.5968L25.2843 17.5968C26.859 15.9637 28.5062 14.2555 29.7203 13.1372C31.3228 12.1323 30.7106 9.5753 29.8395 8.87646C29.5666 8.40862 28.3826 7.76438 27.9191 9.58658C26.7248 11.4228 25.1375 13.6229 23.66 15.6709C22.5855 17.1603 21.569 18.5694 20.8038 19.6995C21.46 18.6736 22.2003 17.4763 22.9429 16.2753L22.9429 16.2752C24.1037 14.3979 25.2702 12.5114 26.1303 11.2554C29.5888 7.83874 27.8502 4.795 26.1303 3.95681C24.4104 3.11863 21.8014 2.07738 22.3046 4.20775C21.2759 8.74992 19.7364 13.2375 18.592 16.5735C18.3568 17.2592 18.1382 17.8963 17.9442 18.4751C18.2977 17.1788 18.6728 15.6134 19.06 13.9973Z" fill="white"/>
<path d="M21.2568 5.93554L21.3505 5.97064L21.3535 5.96254L21.3551 5.95404L21.2568 5.93554ZM19.06 13.9973L18.9628 13.974L18.9628 13.974L19.06 13.9973ZM10.8471 5.26561L10.7499 5.2903L10.7519 5.29628L10.8471 5.26561ZM13.6166 16.6571L13.5185 16.6763L13.5187 16.6775L13.6166 16.6571ZM13.6167 16.6572L13.7148 16.6379L13.7146 16.6368L13.6167 16.6572ZM13.9389 18.2816L13.843 18.31L14.0369 18.2617L13.9389 18.2816ZM12.919 14.9724L12.8236 15.0023L12.8236 15.0023L12.919 14.9724ZM9.90672 4.20713L9.8094 4.18414L9.80432 4.20566L9.80878 4.22731L9.90672 4.20713ZM6.08106 3.95619L6.03725 3.8663L6.03725 3.8663L6.08106 3.95619ZM6.08106 11.2547L6.16246 11.1967L6.15746 11.1897L6.15134 11.1836L6.08106 11.2547ZM10.5112 18.4197L10.5984 18.3706L10.5979 18.3698L10.5112 18.4197ZM10.5112 18.4197L10.424 18.4687L10.4252 18.4708L10.5112 18.4197ZM10.5113 18.4198L10.598 18.3699L10.5973 18.3687L10.5113 18.4198ZM11.6648 20.4054L11.5809 20.4597L11.7508 20.3542L11.6648 20.4054ZM8.34049 15.6709L8.4216 15.6124L8.42049 15.6109L8.34049 15.6709ZM8.34047 15.6709L8.42049 15.6109L8.4191 15.6091L8.34047 15.6709ZM8.34046 15.6709L8.2593 15.7295L8.26183 15.7327L8.34046 15.6709ZM4.08137 9.58658L3.98446 9.61123L3.98853 9.62725L3.99754 9.6411L4.08137 9.58658ZM1.99795 8.9353L2.06053 9.0133L2.07522 9.00151L2.08462 8.98518L1.99795 8.9353ZM2.28018 13.1372L2.34793 13.0636L2.34114 13.0574L2.33331 13.0525L2.28018 13.1372ZM6.71624 17.5968L6.79061 17.5299L6.78822 17.5274L6.71624 17.5968ZM6.71626 17.5969L6.64193 17.6638L6.64299 17.6649L6.71626 17.5969ZM6.7163 17.5969L6.64301 17.665L6.64432 17.6663L6.7163 17.5969ZM6.71634 17.5969L6.64436 17.6664L6.64439 17.6664L6.71634 17.5969ZM6.71641 17.597L6.78839 17.5276L6.78836 17.5276L6.71641 17.597ZM10.8286 21.7028L10.9251 21.729L10.9416 21.6682L10.8939 21.627L10.8286 21.7028ZM10.8208 21.7315L10.7511 21.8032L10.8728 21.9215L10.9173 21.7577L10.8208 21.7315ZM7.77169 18.9242L7.83888 18.8499L7.83416 18.8462L7.77169 18.9242ZM7.77167 18.9242L7.70514 18.9991L7.7092 19.0023L7.77167 18.9242ZM7.77162 18.9242L7.70455 18.9984L7.70518 18.9989L7.77162 18.9242ZM3.29799 14.7652L3.21192 14.8161L3.21836 14.827L3.22732 14.8359L3.29799 14.7652ZM1.3225 14.3636L1.40043 14.4262L1.41416 14.4091L1.41949 14.3879L1.3225 14.3636ZM3.54962 17.3779L3.60663 17.2957L3.59861 17.2901L3.58965 17.2862L3.54962 17.3779ZM8.46842 21.1928L8.5321 21.1157L8.5321 21.1157L8.46842 21.1928ZM9.57137 22.0973L9.51808 22.1819L9.63416 22.0195L9.57137 22.0973ZM5.32432 19.0527L5.2525 19.1231L5.26069 19.1298L5.32432 19.0527ZM3.25373 18.6909L3.33382 18.7508L3.35373 18.7242L3.35373 18.6909L3.25373 18.6909ZM5.50974 21.2768L5.55735 21.1889L5.54533 21.1824L5.53201 21.1793L5.50974 21.2768ZM10.7743 23.8724L10.7489 23.9691L10.8129 23.7801L10.7743 23.8724ZM9.03261 23.367L8.98513 23.455L8.99275 23.4591L9.00097 23.4619L9.03261 23.367ZM8.15851 24.7604L8.25622 24.7392L8.2519 24.7193L8.2402 24.7028L8.15851 24.7604ZM11.0854 25.7385V25.6375L11.0713 25.6395L11.0854 25.7385ZM12.832 25.7738L12.835 25.6738L12.832 25.7738ZM14.5601 25.8063L14.6178 25.7246L14.5916 25.7061L14.5595 25.7063L14.5601 25.8063ZM15.7137 26.2539L15.7237 26.1544L15.7208 26.1542L15.7137 26.2539ZM15.7467 26.2561L15.7526 26.1562L15.7495 26.1561L15.7467 26.2561ZM17.4654 25.806L17.4664 25.706L17.4279 25.7056L17.3991 25.7312L17.4654 25.806ZM19.2586 25.7741L19.2557 25.6741L19.2557 25.6741L19.2586 25.7741ZM21.0052 25.7388L21.0194 25.6388H21.0052V25.7388ZM23.9321 24.7607L23.8504 24.7031L23.8387 24.7196L23.8344 24.7394L23.9321 24.7607ZM23.058 23.3673L23.0862 23.4632L23.0962 23.4603L23.1055 23.4553L23.058 23.3673ZM20.8175 23.9602L20.7805 23.8673L20.8418 24.0572L20.8175 23.9602ZM26.3859 21.2406L26.3636 21.1431L26.3503 21.1461L26.3383 21.1526L26.3859 21.2406ZM28.6419 18.6547L28.5419 18.6547L28.5419 18.6879L28.5618 18.7146L28.6419 18.6547ZM26.5713 19.0164L26.6353 19.094L26.6428 19.0864L26.5713 19.0164ZM21.9554 22.2913L21.8985 22.2091L22.0081 22.3764L21.9554 22.2913ZM25.1163 19.8682L25.0563 19.7881L25.0541 19.7899L25.1163 19.8682ZM25.1164 19.8681L25.1764 19.9482L25.1786 19.9464L25.1164 19.8681ZM28.5099 17.271L28.4698 17.1794L28.461 17.1832L28.453 17.1887L28.5099 17.271ZM30.737 14.2567L30.64 14.281L30.6453 14.3023L30.6591 14.3193L30.737 14.2567ZM28.7615 14.6583L28.8322 14.729L28.8411 14.7201L28.8476 14.7092L28.7615 14.6583ZM24.2879 18.8173L24.2207 18.743L24.2172 18.7466L24.2879 18.8173ZM24.2879 18.8173L24.355 18.8916L24.3586 18.888L24.2879 18.8173ZM22.5874 20.3612L22.5168 20.2904L22.6549 20.435L22.5874 20.3612ZM25.2842 17.5968L25.2135 17.5261L25.2122 17.5274L25.2842 17.5968ZM25.2843 17.5968L25.355 17.6675L25.3562 17.6662L25.2843 17.5968ZM29.7203 13.1372L29.6672 13.0525L29.6593 13.0574L29.6525 13.0636L29.7203 13.1372ZM29.8395 8.87646L29.7531 8.92683L29.7624 8.94285L29.7769 8.95446L29.8395 8.87646ZM27.9191 9.58658L28.0029 9.6411L28.0119 9.62725L28.016 9.61123L27.9191 9.58658ZM23.66 15.6709L23.5789 15.6124L23.5789 15.6124L23.66 15.6709ZM20.8038 19.6995L20.7195 19.6456L20.8866 19.7556L20.8038 19.6995ZM22.9429 16.2753L22.8587 16.2212L22.8578 16.2227L22.9429 16.2753ZM22.9429 16.2752L23.0271 16.3293L23.028 16.3278L22.9429 16.2752ZM26.1303 11.2554L26.06 11.1842L26.0532 11.191L26.0478 11.1989L26.1303 11.2554ZM22.3046 4.20775L22.4022 4.22984L22.4073 4.20728L22.402 4.18476L22.3046 4.20775ZM18.592 16.5735L18.6866 16.606L18.6866 16.606L18.592 16.5735ZM17.9442 18.4751L17.8478 18.4488L18.039 18.5069L17.9442 18.4751ZM21.1632 5.90043C20.426 7.86655 19.6728 11.0108 18.9628 13.974L19.1573 14.0206C19.8686 11.0519 20.6187 7.92233 21.3505 5.97064L21.1632 5.90043ZM15.9725 0.1C17.0526 0.1 18.5619 0.453879 19.693 1.35768C20.8167 2.25567 21.5755 3.70236 21.1585 5.91703L21.3551 5.95404C21.7857 3.66682 20.9995 2.14573 19.8178 1.20144C18.6434 0.262941 17.0866 -0.1 15.9725 -0.1V0.1ZM10.944 5.24098C10.7102 4.32128 10.7742 3.54488 11.0301 2.89689C11.2863 2.24802 11.7377 1.72101 12.2894 1.30587C13.3955 0.473615 14.8931 0.1 15.9725 0.1V-0.1C14.8575 -0.1 13.3156 0.2834 12.1692 1.14606C11.5946 1.57837 11.1166 2.13329 10.844 2.82343C10.5712 3.51446 10.5071 4.33416 10.7501 5.29025L10.944 5.24098ZM13.7148 16.6378C13.1177 13.5922 12.3136 9.49071 10.9422 5.23494L10.7519 5.29628C12.1192 9.53941 12.9213 13.6301 13.5185 16.6763L13.7148 16.6378ZM13.7146 16.6368L13.7145 16.6367L13.5187 16.6775L13.5188 16.6775L13.7146 16.6368ZM14.0369 18.2617C13.9354 17.7631 13.8289 17.2199 13.7148 16.6379L13.5185 16.6764C13.6326 17.2582 13.7392 17.8022 13.8409 18.3016L14.0369 18.2617ZM12.8236 15.0023C13.2045 16.2178 13.5567 17.3417 13.843 18.31L14.0348 18.2533C13.748 17.2831 13.3952 16.1575 13.0145 14.9425L12.8236 15.0023ZM9.80878 4.22731C10.5035 7.59887 11.7727 11.6487 12.8236 15.0023L13.0145 14.9425C11.9627 11.5862 10.697 7.54668 10.0047 4.18695L9.80878 4.22731ZM6.12487 4.04608C6.98619 3.62633 8.05429 3.16418 8.83978 3.06771C9.23587 3.01906 9.52828 3.06759 9.69461 3.22412C9.8555 3.37553 9.93256 3.66282 9.8094 4.18414L10.004 4.23012C10.1325 3.68626 10.0722 3.30481 9.83168 3.07848C9.59661 2.85727 9.22363 2.81906 8.8154 2.8692C7.99221 2.9703 6.89585 3.44787 6.03725 3.8663L6.12487 4.04608ZM6.15134 11.1836C4.43949 9.4925 4.02705 7.90859 4.23776 6.65513C4.44941 5.39612 5.29215 4.4519 6.12487 4.04608L6.03725 3.8663C5.15006 4.29867 4.26354 5.29541 4.04053 6.62197C3.81659 7.95408 4.2641 9.60036 6.01078 11.3259L6.15134 11.1836ZM10.5979 18.3698C9.33402 16.1724 7.75947 13.4347 6.16246 11.1967L5.99966 11.3128C7.58994 13.5414 9.15957 16.2702 10.4245 18.4695L10.5979 18.3698ZM10.5984 18.3707L10.5984 18.3706L10.424 18.4687L10.4241 18.4687L10.5984 18.3707ZM10.5973 18.3687L10.5972 18.3687L10.4252 18.4708L10.4253 18.4709L10.5973 18.3687ZM11.7508 20.3542C11.4082 19.7786 11.0205 19.1046 10.598 18.3699L10.4246 18.4697C10.8469 19.2039 11.2354 19.8793 11.5789 20.4565L11.7508 20.3542ZM8.25939 15.7294C9.57188 17.5487 10.7954 19.2448 11.5809 20.4597L11.7488 20.3511C10.9599 19.1308 9.73276 17.4299 8.42158 15.6124L8.25939 15.7294ZM8.26047 15.7309L8.26049 15.7309L8.42049 15.6109L8.42047 15.6109L8.26047 15.7309ZM8.26183 15.7327L8.26184 15.7327L8.4191 15.6091L8.41909 15.6091L8.26183 15.7327ZM3.99754 9.6411C5.19344 11.4797 6.78224 13.682 8.25936 15.7294L8.42156 15.6124C6.94357 13.5637 5.35791 11.3658 4.1652 9.53205L3.99754 9.6411ZM2.08462 8.98518C2.14476 8.8807 2.26741 8.75737 2.42914 8.6595C2.58992 8.56221 2.78066 8.49537 2.97253 8.49373C3.16193 8.49211 3.35602 8.55372 3.53119 8.71971C3.70819 8.88743 3.87152 9.16729 3.98446 9.61123L4.17828 9.56192C4.05945 9.09477 3.88175 8.77637 3.66875 8.57453C3.45392 8.37096 3.20905 8.2917 2.97082 8.29374C2.73505 8.29576 2.50949 8.37711 2.3256 8.48839C2.14265 8.5991 1.99226 8.74472 1.91128 8.88541L2.08462 8.98518ZM2.33331 13.0525C1.57154 12.5748 1.2911 11.7392 1.31141 10.924C1.32155 10.517 1.40689 10.1196 1.542 9.78256C1.67764 9.44418 1.86054 9.17373 2.06053 9.0133L1.93538 8.85729C1.69979 9.04629 1.49986 9.35017 1.35636 9.70814C1.21232 10.0674 1.1222 10.4884 1.11147 10.919C1.09005 11.7788 1.3863 12.6947 2.22706 13.2219L2.33331 13.0525ZM6.78822 17.5274C5.2143 15.8952 3.56473 14.1845 2.34793 13.0636L2.21243 13.2107C3.42384 14.3266 5.06862 16.0323 6.64425 17.6662L6.78822 17.5274ZM6.79059 17.53L6.79057 17.5299L6.64191 17.6637L6.64194 17.6638L6.79059 17.53ZM6.78958 17.5289L6.78954 17.5288L6.64299 17.6649L6.64302 17.6649L6.78958 17.5289ZM6.78832 17.5275L6.78829 17.5275L6.64432 17.6663L6.64436 17.6664L6.78832 17.5275ZM6.78836 17.5276L6.78829 17.5275L6.64439 17.6664L6.64446 17.6665L6.78836 17.5276ZM10.8939 21.627C9.98613 20.8436 8.42951 19.2295 6.78839 17.5276L6.64442 17.6664C8.28174 19.3644 9.84662 20.9874 10.7632 21.7785L10.8939 21.627ZM10.9173 21.7577L10.9251 21.729L10.7321 21.6765L10.7243 21.7053L10.9173 21.7577ZM7.70462 18.9984C8.89572 20.0753 10.0038 21.0772 10.7511 21.8032L10.8904 21.6598C10.14 20.9307 9.02869 19.9259 7.83875 18.8501L7.70462 18.9984ZM7.7092 19.0023L7.70922 19.0023L7.83416 18.8462L7.83414 18.8461L7.7092 19.0023ZM7.70518 18.9989L7.70523 18.999L7.8381 18.8495L7.83805 18.8494L7.70518 18.9989ZM3.22732 14.8359C4.43733 16.0444 6.14199 17.5856 7.70455 18.9984L7.83868 18.85C6.27479 17.4361 4.57436 15.8986 3.36865 14.6944L3.22732 14.8359ZM1.41949 14.3879C1.44939 14.2688 1.51702 14.1306 1.61612 14.0171C1.71496 13.904 1.83983 13.8211 1.98366 13.7988C2.26408 13.7554 2.69229 13.9377 3.21192 14.8161L3.38405 14.7142C2.85741 13.824 2.36516 13.5374 1.95305 13.6012C1.75061 13.6326 1.5862 13.7474 1.4655 13.8856C1.34506 14.0234 1.2629 14.1902 1.2255 14.3392L1.41949 14.3879ZM3.58965 17.2862C2.73351 16.9122 2.07837 16.312 1.69388 15.7395C1.50147 15.4531 1.37948 15.1775 1.33179 14.9444C1.28361 14.709 1.314 14.5337 1.40043 14.4262L1.24456 14.3009C1.10483 14.4747 1.08201 14.7214 1.13585 14.9845C1.19018 15.2501 1.32546 15.5497 1.52785 15.851C1.93295 16.4542 2.61753 17.0798 3.50959 17.4695L3.58965 17.2862ZM8.5321 21.1157C7.18429 20.0024 5.48779 18.6011 3.60663 17.2957L3.49261 17.46C5.36593 18.76 7.05639 20.1562 8.40474 21.2699L8.5321 21.1157ZM9.63416 22.0195C9.30016 21.75 8.93158 21.4456 8.5321 21.1157L8.40474 21.2699C8.80398 21.5996 9.17351 21.9048 9.50859 22.1751L9.63416 22.0195ZM5.26069 19.1298C6.79954 20.3991 8.28374 21.4045 9.51808 22.1819L9.62466 22.0127C8.39492 21.2382 6.91821 20.2377 5.38794 18.9755L5.26069 19.1298ZM3.35373 18.6909C3.35373 18.5565 3.38369 18.4264 3.44422 18.3293C3.50274 18.2354 3.59019 18.1705 3.71823 18.1573C3.85117 18.1436 4.03996 18.1843 4.29705 18.3328C4.55322 18.4808 4.86919 18.7312 5.2529 19.1227L5.39573 18.9827C5.00467 18.5837 4.67443 18.3199 4.39709 18.1597C4.12068 18 3.88867 17.9386 3.69766 17.9584C3.50175 17.9786 3.36209 18.0829 3.27449 18.2235C3.1889 18.3608 3.15373 18.5305 3.15373 18.6909L3.35373 18.6909ZM5.53201 21.1793C4.52958 20.9503 3.90077 20.4349 3.56456 19.9276C3.39599 19.6733 3.30165 19.4221 3.26934 19.2106C3.23646 18.9954 3.26961 18.8367 3.33382 18.7508L3.17364 18.631C3.06355 18.7783 3.03495 19.0007 3.07164 19.2408C3.10889 19.4846 3.21544 19.7629 3.39785 20.0381C3.76359 20.59 4.43708 21.1344 5.48747 21.3743L5.53201 21.1793ZM10.8129 23.7801C9.2132 23.1123 6.98878 21.9638 5.55735 21.1889L5.46213 21.3648C6.89456 22.1403 9.12634 23.2928 10.7358 23.9647L10.8129 23.7801ZM9.00097 23.4619C9.5127 23.6326 10.1157 23.8026 10.7489 23.9691L10.7998 23.7757C10.1681 23.6095 9.56991 23.4408 9.06425 23.2721L9.00097 23.4619ZM8.2402 24.7028C8.2228 24.6781 8.19656 24.6261 8.16734 24.5491C8.13889 24.4742 8.1098 24.3815 8.08493 24.2797C8.03478 24.0745 8.00389 23.8413 8.02453 23.6472C8.0455 23.4499 8.11491 23.324 8.23461 23.2763C8.36282 23.2253 8.593 23.2434 8.98513 23.455L9.0801 23.279C8.67759 23.0618 8.37635 23.0046 8.16064 23.0905C7.9364 23.1798 7.84937 23.403 7.82565 23.6261C7.80159 23.8523 7.83774 24.1107 7.89065 24.3272C7.9173 24.4362 7.94875 24.5368 7.98036 24.6201C8.0112 24.7013 8.04456 24.7724 8.07682 24.8181L8.2402 24.7028ZM11.0713 25.6395C10.1859 25.7656 9.51557 25.7171 9.05033 25.5474C8.58872 25.3791 8.33354 25.0942 8.25622 24.7392L8.0608 24.7817C8.15566 25.2172 8.46997 25.5486 8.9818 25.7353C9.48999 25.9207 10.1971 25.966 11.0995 25.8375L11.0713 25.6395ZM12.835 25.6738C12.2455 25.6564 11.6405 25.6385 11.0854 25.6385V25.8385C11.637 25.8385 12.2389 25.8563 12.8291 25.8737L12.835 25.6738ZM14.5595 25.7063C14.0487 25.7097 13.4505 25.692 12.835 25.6738L12.8291 25.8737C13.4435 25.8919 14.0456 25.9097 14.5608 25.9063L14.5595 25.7063ZM15.7208 26.1542C15.2032 26.1169 14.9139 25.9339 14.6178 25.7246L14.5024 25.888C14.8102 26.1055 15.1354 26.3125 15.7065 26.3537L15.7208 26.1542ZM15.7495 26.1561C15.7415 26.1559 15.7329 26.1553 15.7237 26.1544L15.7036 26.3534C15.7173 26.3548 15.7307 26.3557 15.7439 26.356L15.7495 26.1561ZM15.9195 26.1611C15.8612 26.1611 15.8057 26.1594 15.7526 26.1563L15.7407 26.3559C15.7979 26.3593 15.8574 26.3611 15.9195 26.3611V26.1611ZM17.3991 25.7312C17.0819 26.0121 16.6169 26.1611 15.9195 26.1611V26.3611C16.6429 26.3611 17.1638 26.2067 17.5317 25.8809L17.3991 25.7312ZM19.2557 25.6741C18.6139 25.6931 17.991 25.7115 17.4664 25.706L17.4644 25.906C17.9937 25.9115 18.621 25.8929 19.2616 25.874L19.2557 25.6741ZM21.0052 25.6388C20.4501 25.6388 19.8451 25.6567 19.2557 25.6741L19.2616 25.874C19.8517 25.8566 20.4536 25.8388 21.0052 25.8388V25.6388ZM23.8344 24.7394C23.7571 25.0944 23.5019 25.3794 23.0403 25.5477C22.575 25.7174 21.9048 25.7659 21.0193 25.6398L20.9911 25.8378C21.8935 25.9663 22.6006 25.921 23.1088 25.7356C23.6206 25.5489 23.935 25.2175 24.0298 24.782L23.8344 24.7394ZM23.1055 23.4553C23.4976 23.2437 23.7278 23.2255 23.856 23.2766C23.9757 23.3242 24.0451 23.4502 24.0661 23.6475C24.0867 23.8416 24.0558 24.0748 24.0057 24.28C23.9808 24.3817 23.9517 24.4745 23.9233 24.5494C23.894 24.6264 23.8678 24.6784 23.8504 24.7031L24.0138 24.8184C24.0461 24.7727 24.0794 24.7016 24.1103 24.6204C24.1419 24.5371 24.1733 24.4365 24.2 24.3275C24.2529 24.111 24.289 23.8526 24.265 23.6264C24.2412 23.4033 24.1542 23.18 23.93 23.0908C23.7143 23.0049 23.413 23.0621 23.0105 23.2793L23.1055 23.4553ZM20.8418 24.0572C21.6528 23.8542 22.441 23.6526 23.0862 23.4632L23.0298 23.2713C22.3891 23.4595 21.6045 23.6601 20.7932 23.8632L20.8418 24.0572ZM26.3383 21.1526C24.8137 21.978 22.3907 23.2265 20.7805 23.8673L20.8545 24.0531C22.4766 23.4076 24.9086 22.1541 26.4335 21.3285L26.3383 21.1526ZM28.5618 18.7146C28.626 18.8004 28.6592 18.9591 28.6263 19.1744C28.594 19.3858 28.4997 19.637 28.3311 19.8914C27.9949 20.3987 27.3661 20.9141 26.3636 21.1431L26.4082 21.3381C27.4586 21.0981 28.1321 20.5537 28.4978 20.0018C28.6802 19.7266 28.7868 19.4484 28.824 19.2046C28.8607 18.9645 28.8321 18.742 28.722 18.5948L28.5618 18.7146ZM26.6428 19.0864C27.0265 18.6949 27.3424 18.4446 27.5986 18.2966C27.8557 18.1481 28.0445 18.1073 28.1774 18.1211C28.3055 18.1343 28.3929 18.1991 28.4514 18.293C28.512 18.3902 28.5419 18.5203 28.5419 18.6547L28.7419 18.6547C28.7419 18.4943 28.7067 18.3246 28.6212 18.1873C28.5336 18.0467 28.3939 17.9424 28.198 17.9221C28.007 17.9024 27.775 17.9638 27.4986 18.1234C27.2212 18.2836 26.891 18.5474 26.4999 18.9464L26.6428 19.0864ZM22.0081 22.3764C23.3098 21.5706 24.9392 20.4922 26.635 19.0936L26.5077 18.9393C24.8214 20.3301 23.2002 21.4032 21.9028 22.2063L22.0081 22.3764ZM25.0541 19.7899C23.8954 20.7108 22.7611 21.6123 21.8985 22.2091L22.0123 22.3736C22.8816 21.7721 24.0219 20.8658 25.1786 19.9465L25.0541 19.7899ZM25.0564 19.7881L25.0563 19.7882L25.1763 19.9482L25.1764 19.9481L25.0564 19.7881ZM28.453 17.1887C27.4841 17.8585 26.2561 18.8345 25.0542 19.7898L25.1786 19.9464C26.3825 18.9895 27.6045 18.0183 28.5667 17.3533L28.453 17.1887ZM30.6591 14.3193C30.7455 14.4268 30.7759 14.6021 30.7277 14.8376C30.68 15.0706 30.558 15.3462 30.3656 15.6327C29.9811 16.2051 29.326 16.8053 28.4698 17.1794L28.5499 17.3626C29.442 16.9729 30.1265 16.3473 30.5316 15.7442C30.734 15.4428 30.8693 15.1432 30.9236 14.8777C30.9775 14.6145 30.9547 14.3678 30.8149 14.194L30.6591 14.3193ZM28.8476 14.7092C29.3672 13.8308 29.7954 13.6485 30.0758 13.692C30.2197 13.7142 30.3445 13.7971 30.4434 13.9103C30.5425 14.0237 30.6101 14.1619 30.64 14.281L30.834 14.2323C30.7966 14.0833 30.7144 13.9166 30.594 13.7787C30.4733 13.6405 30.3089 13.5257 30.1064 13.4943C29.6943 13.4305 29.2021 13.7171 28.6754 14.6074L28.8476 14.7092ZM24.355 18.8915C25.9175 17.4787 27.6222 15.9375 28.8322 14.729L28.6908 14.5875C27.4851 15.7917 25.7847 17.3292 24.2208 18.7431L24.355 18.8915ZM24.3586 18.888L24.3586 18.888L24.2172 18.7466L24.2172 18.7466L24.3586 18.888ZM22.6549 20.435C23.1772 19.9563 23.7557 19.4333 24.3549 18.8915L24.2208 18.7431C23.6217 19.2848 23.0427 19.8083 22.5198 20.2875L22.6549 20.435ZM25.2122 17.5274C24.2471 18.5283 23.3102 19.4999 22.5168 20.2904L22.6579 20.4321C23.4531 19.6399 24.3915 18.6667 25.3562 17.6662L25.2122 17.5274ZM25.2135 17.5261L25.2135 17.5261L25.3549 17.6675L25.355 17.6675L25.2135 17.5261ZM29.6525 13.0636C28.4357 14.1844 26.7862 15.8952 25.2123 17.5274L25.3562 17.6662C26.9319 16.0322 28.5766 14.3266 29.788 13.2107L29.6525 13.0636ZM29.7769 8.95446C29.9778 9.11565 30.1711 9.39092 30.3221 9.73581C30.4725 10.0793 30.5778 10.4847 30.6078 10.8993C30.6679 11.7303 30.4256 12.5768 29.6672 13.0525L29.7734 13.2219C30.6174 12.6926 30.8704 11.7582 30.8072 10.8848C30.7756 10.4471 30.6647 10.0195 30.5053 9.6556C30.3466 9.2931 30.1367 8.98669 29.902 8.79845L29.7769 8.95446ZM28.016 9.61123C28.1293 9.1657 28.2841 8.88214 28.4486 8.71024C28.6111 8.54048 28.786 8.47628 28.9529 8.47273C29.1228 8.46913 29.2919 8.52838 29.4366 8.61864C29.5818 8.70924 29.6944 8.82615 29.7531 8.92683L29.9259 8.82608C29.8482 8.69284 29.7104 8.55379 29.5424 8.44896C29.3739 8.34379 29.1669 8.26815 28.9487 8.27278C28.7276 8.27747 28.5025 8.36463 28.3041 8.57195C28.1077 8.77713 27.9406 9.09635 27.8222 9.56192L28.016 9.61123ZM23.7411 15.7294C25.2182 13.682 26.807 11.4797 28.0029 9.6411L27.8353 9.53205C26.6426 11.3658 25.0569 13.5637 23.5789 15.6124L23.7411 15.7294ZM20.8866 19.7556C21.6507 18.6269 22.6663 17.2193 23.7411 15.7294L23.5789 15.6124C22.5047 17.1014 21.4872 18.5118 20.7209 19.6435L20.8866 19.7556ZM22.8578 16.2227C22.1151 17.4239 21.3752 18.6205 20.7195 19.6456L20.888 19.7534C21.5447 18.7267 22.2854 17.5287 23.0279 16.3279L22.8578 16.2227ZM22.8588 16.2211L22.8588 16.2212L23.027 16.3294L23.027 16.3293L22.8588 16.2211ZM26.0478 11.1989C25.186 12.4573 24.0181 14.3462 22.8579 16.2226L23.028 16.3278C24.1893 14.4497 25.3543 12.5655 26.2128 11.3119L26.0478 11.1989ZM26.0865 4.04671C26.9192 4.45252 27.7619 5.39675 27.9736 6.65575C28.1843 7.90921 27.7719 9.49312 26.06 11.1842L26.2006 11.3265C27.9473 9.60098 28.3948 7.9547 28.1708 6.6226C27.9478 5.29603 27.0613 4.29929 26.1741 3.86692L26.0865 4.04671ZM22.402 4.18476C22.2788 3.66344 22.3559 3.37615 22.5167 3.22475C22.6831 3.06822 22.9755 3.01968 23.3716 3.06833C24.1571 3.1648 25.2252 3.62695 26.0865 4.04671L26.1741 3.86692C25.3155 3.44849 24.2191 2.97092 23.396 2.86982C22.9877 2.81968 22.6147 2.85789 22.3797 3.0791C22.1392 3.30543 22.0788 3.68688 22.2073 4.23074L22.402 4.18476ZM18.6866 16.606C19.8308 13.2706 21.3721 8.77805 22.4022 4.22984L22.2071 4.18567C21.1798 8.72179 19.642 13.2045 18.4974 16.5411L18.6866 16.606ZM18.039 18.5069C18.2329 17.9284 18.4513 17.2918 18.6866 16.606L18.4974 16.5411C18.2622 17.2267 18.0435 17.8641 17.8494 18.4434L18.039 18.5069ZM18.9628 13.974C18.5755 15.5906 18.2008 17.1543 17.8478 18.4488L18.0407 18.5014C18.3947 17.2033 18.7702 15.6362 19.1573 14.0206L18.9628 13.974Z" fill="black" mask="url(#path-1-inside-1_118_48)"/>
</svg>
              </div>
            `,
            size: new naver.maps.Size(36, 36),
            scaledSize: new naver.maps.Size(36, 36),
            anchor: new naver.maps.Point(18, 18),
          },
        });

        const infoWindow = new naver.maps.InfoWindow({
          content: `
          <div style="box-shadow: 0px 0px 5px #00000088 ; background-color: #fff; border-radius: 5px;">
            <div style="padding:10px 10px 0px 10px; font-weight:bold;">
              ${addressItem.placeName}
            </div>
            <div style="padding:0px 10px 10px 10px; text-align:center;">
              ${addressItem.placeType}
            </div>
            </div>
          `,
          borderWidth: 0, // border 제거
        });

        naver.maps.Event.addListener(marker, "click", () => {
          if (infoWindow.getMap()) {
            infoWindow.close();
          } else {
            infoWindow.open(mapRef.current, marker);
            setSelectedPlace(addressItem.placeName); // 클릭한 장소 이름 전달
          }
        });
      });
      // 현재 위치 마커 추가
      new naver.maps.Marker({
        position: new naver.maps.LatLng(
          currentMyLocation.lat,
          currentMyLocation.lng
        ),
        map: mapRef.current,
        icon: {
          url: "https://cdn3d.iconscout.com/3d/premium/thumb/location-pin-3d-illustration-download-in-png-blend-fbx-gltf-file-formats--map-marker-pointer-and-navigation-pack-maps-illustrations-4688424.png",
          size: new naver.maps.Size(36, 36),
          scaledSize: new naver.maps.Size(36, 36),
          anchor: new naver.maps.Point(12, 36),
        },
      });
    }
  }, [currentMyLocation, address]);

  return (
    <div
      id="map"
      style={{
        width: "93%",
        height: "300px",
        border: "1.5px #636038 solid",
        zIndex: 0,
      }}
    />
  );
}

export default Map;
